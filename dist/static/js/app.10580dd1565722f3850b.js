webpackJsonp([1],{0:function(t,e){},"0GLn":function(t,e,n){"use strict";e.a={name:"contact-modal",props:["contact","contactSearch","removeContact","new"]}},"0aNp":function(t,e){},"431H":function(t,e){},"7qMK":function(t,e,n){"use strict";function a(t){n("aCya")}var c=n("YsAA"),o=n("ApmC"),r=n("VU/8"),s=a,i=r(c.a,o.a,!1,s,"data-v-0d6d4394",null);e.a=i.exports},"8kKL":function(t,e,n){"use strict";function a(t){n("yUmq")}var c=n("dUXA"),o=n("ofwx"),r=n("VU/8"),s=a,i=r(c.a,o.a,!1,s,null,null);e.a=i.exports},"91lF":function(t,e,n){"use strict";var a=n("NYxO");e.a={name:"contact-filters",computed:Object(a.b)(["contactSearch"]),methods:{searchContacts:function(t){this.$store.dispatch("search",{searchKey:"contactSearch",searchString:t.target.value})}}}},"9XKw":function(t,e,n){"use strict";var a=n("Za4h"),c=(n.n(a),n("rdLu")),o=n.n(c);e.a=function(t,e,n){function c(t,e,n){if(t){e(t);var a=n(t);if(a)for(var o=a.length,r=0;r<o;r++)c(a[r],e,n)}}function r(){q.sort(function(t,e){return e.name.toLowerCase()<t.name.toLowerCase()?1:-1})}function s(t,e){var n=L;if($){clearTimeout($);var c=a.transform(P.attr("transform")),o=null,r=null;"left"===e||"right"===e?(o="left"===e?c.translate[0]+n:c.translate[0]-n,r=c.translate[1]):"up"!==e&&"down"!==e||(o=c.translate[0],r="up"===e?c.translate[1]+n:c.translate[1]-n);var i=K.scale();P.transition().attr("transform","translate("+o+","+r+")scale("+i+")"),a.select(t).select("g.node").attr("transform","translate("+o+","+r+")"),K.scale(K.scale()),K.translate([o,r]),$=setTimeout(function(){s(t,n,e)},50)}}function i(){P.attr("transform","translate("+a.event.translate+")scale("+a.event.scale+")")}function l(t,e){O=t,a.select(e).select(".ghostCircle").attr("pointer-events","none"),a.selectAll(".ghostCircle").attr("class","ghostCircle show"),a.select(e).attr("class","node activeDrag"),P.selectAll("g.node").sort(function(t,e){return t.id!==O.id?1:-1}),v.length>1&&(x=q.links(v),b=P.selectAll("path.link").data(x,function(t){return t.target.id}).remove(),M=P.selectAll("g.node").data(v,function(t){return t.id}).filter(function(t,e){return t.id!==O.id}).remove()),w=q.links(q.nodes(O.parent)),P.selectAll("path.link").filter(function(t,e){return t.target.id===O.id}).remove(),I=null}function d(){F=null,a.selectAll(".ghostCircle").attr("class","ghostCircle"),a.select(C).attr("class","node"),a.select(C).select(".ghostCircle").attr("pointer-events",""),H(),null!==O&&(f(m),O=null)}function u(t){t._children&&(t.children=t._children,t.children.forEach(u),t._children=null)}function h(t){return t.children?(t._children=t.children,t.children=null):t._children&&(t.children=t._children,t._children=null),t}function p(t){a.event.defaultPrevented||(t=h(t),f(t))}function f(t){function n(t,e,a){return void 0===n.e&&(n.e=document.createElement("span"),n.e.style.visibility="hidden",document.body.appendChild(n.e)),n.e.style.fontSize=a,n.e.style.fontFamily=e,n.e.innerText=t,n.e.offsetWidth}var c=[1];!function t(e,n){n.children&&n.children.length>0&&(c.length<=e+1&&c.push(0),c[e+1]+=n.children.length,n.children.forEach(function(n){t(e+1,n)}))}(0,m);var r=35*a.max(c);q=q.size([r,N]);var s=q.nodes(m).reverse(),i=q.links(s),l={};!function(){o.a.each(s,function(t){var e=o.a.where(s,{depth:t.depth}),a=0;o.a.each(e,function(t){a=Math.max(n(t.name,"sans-serif","11px"),a)}),l[t.depth]=a})}();var d=[0];o.a.each(o.a.keys(l),function(t,e){d.push(o.a.reduce(o.a.values(l).splice(0,e),function(t,e){return t+e},0)+l[t])}),s.forEach(function(t){t.y=d[t.depth]+25*t.depth});var u=P.selectAll("g.node").data(s,function(t){return t.id||(t.id=++T)}),h=u.enter().append("g").call(B).attr("class","node").attr("transform",function(e){return"translate("+t.x0+","+t.y0+")"}).on("click",p);h.append("circle").attr("class","nodeCircle").attr("r",0).style("fill",function(t){return t._children?"#3f536e":"#fff"}).on("mouseover",function(t){var n=this.getBoundingClientRect(),a=document.createElement("div");a.className="tooltip",a.style.left=n.x-100+"px",a.style.bottom=window.innerHeight-n.y+6+"px",a.innerHTML='\n                    <div class="pop-title pop-name">'+(t.contact.name||"")+'</div>\n                    <div class="pop-title">'+(t.contact.titleOverride||t.contact.title||"")+'</div>\n                    <div class="pop-title">'+(t.contact.email||"")+'</div>\n                    <div class="pop-title">'+(t.contact.phone||"")+'</div>\n                    <div class="pop-title">'+(t.contact.mobilephone||"")+"</div>\n                ",t.contact.uploadedImageUrl&&(a.innerHTML='<img width="80px" src="'+(t.contact.uploadedImageUrl||"")+'">'+a.innerHTML),e.appendChild(a)}).on("mouseout",function(){a.select(e).select("div.tooltip").remove()}),h.append("text").attr("x",10).attr("dy",function(t){return t.children||t._children?"-0.3em":".3em"}).attr("transform","rotate(90)").attr("class","nodeText").text(function(t){return t.name}).style("fill-opacity",0),h.append("circle").attr("class","ghostCircle").attr("r",25).attr("opacity",.2).style("fill","#13CE66").attr("pointer-events","mouseover").on("mouseover",function(t){D(t)}).on("mouseout",function(t){j(t)}),u.select("text").attr("x",10).text(function(t){return t.name}),u.select("circle.nodeCircle").attr("r",7).style("fill",function(t){return t.contact.colorCode&&t._children?"#"+t.contact.colorCode:t._children?"#3f536e":"#fff"}).style("stroke",function(t){return t.contact.colorCode?"#"+t.contact.colorCode:t.children||t._children?"#3f536e":"#ccc"}),u.transition().duration(E).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).select("text").style("fill-opacity",1);var f=u.exit().transition().duration(E).attr("transform",function(e){return"translate("+t.x+","+t.y+")"}).remove();f.select("circle").attr("r",0),f.select("text").style("fill-opacity",0);var v=P.selectAll("path.link").data(i,function(t){return t.target.id});v.enter().insert("path","g").attr("class","link").attr("d",function(e){var n={x:t.x0,y:t.y0};return Y({source:n,target:n})}),v.transition().duration(E).attr("d",Y),v.exit().transition().duration(E).attr("d",function(e){var n={x:t.x,y:t.y};return Y({source:n,target:n})}).remove(),s.forEach(function(t){t.x0=t.x,t.y0=t.y})}var m,v=null,C=null,g=null,y=null,_=null,x=null,w=null,b=null,M=null,k=null,I=null,$=null,A=0,S=0,F=null,O=null,L=200,T=0,E=750,U=e.getBoundingClientRect(),N=U.width,R=U.height,q=a.layout.tree().size([R,N]),Y=a.svg.diagonal().projection(function(t){return[t.x,t.y]});c(t,function(t){A++,S=Math.max(t.name.length,S)},function(t){return t.children&&t.children.length>0?t.children:null}),r();var K=a.behavior.zoom().scaleExtent([.1,10]).on("zoom",i);e.innerHTML=null;var z=a.select(e).append("svg").attr("width",N).attr("height",R).attr("class","overlay").call(K),B=(z.append("svg:defs"),a.behavior.drag().on("dragstart",function(t){t!==m&&(I=!0,v=q.nodes(t),a.event.sourceEvent.stopPropagation())}).on("drag",function(t){if(t!==m){if(I&&(C=this,l(t,C)),k=a.mouse(document.getElementsByTagName("svg")[0]),k[0]<20)$=!0,s(this,"left");else if(k[0]>U.width-20)$=!0,s(this,"right");else if(k[1]<20)$=!0,s(this,"up");else if(k[1]>U.height-20)$=!0,s(this,"down");else try{clearTimeout($)}catch(t){}t.x0+=a.event.dx,t.y0+=a.event.dy;a.select(this).attr("transform","translate("+t.x0+","+t.y0+")"),H()}}).on("dragend",function(t){if(t!==m)if(C=this,F){var e=O.parent.children.indexOf(O);e>-1&&O.parent.children.splice(e,1),void 0!==F.children||void 0!==F._children?void 0!==F.children?F.children.push(O):F._children.push(O):(F.children=[],F.children.push(O)),O.contact.parentId=F.contact.id,n(O.contact),u(F),r(),d()}else d()})),D=function(t){F=t,H()},j=function(t){F=null,H()},H=function(){var t=[];null!==O&&null!==F&&(t=[{source:{x:F.x0,y:F.y0},target:{x:O.x0,y:O.y0}}]);var e=P.selectAll(".templink").data(t);e.enter().append("path").attr("class","templink").attr("d",a.svg.diagonal()).attr("pointer-events","none"),e.attr("d",a.svg.diagonal()),e.exit().remove()},P=z.append("g");m=t,m.x0=R/2,m.y0=0,f(m),function(t){_=K.scale(),g=-t.x0,y=-t.y0,g=g*_+N/2,y=y*_+20,a.select("g").transition().duration(E).attr("transform","translate("+g+","+y+")scale("+_+")"),K.scale(_),K.translate([g,y])}(m)}},ApmC:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"accounts-wrapper"},[t._m(0),t._v(" "),n("div",{staticClass:"row at-row"},[n("AccountFilters")],1),t._v(" "),n("div",{staticClass:"row at-row"},[n("div",{staticClass:"accounts"},t._l(t.filteredAccounts,function(e){return n("div",{key:e.id,staticClass:"account row at-row"},[n("router-link",{attrs:{to:{name:"account",params:{id:e.sfid}}}},[n("at-button",{attrs:{type:"primary",size:"large",hollow:""}},[t._v(t._s(e.name))])],1)],1)}))])])},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row at-row top-row"},[a("div",{staticClass:"col-sm-24"},[a("div",{staticClass:"banner"},[a("img",{staticClass:"hierarchy-image",attrs:{src:n("yoyZ")}}),t._v(" "),a("span",{staticClass:"treeforce-title"},[t._v("TreeForce")])])])])}],o={render:a,staticRenderFns:c};e.a=o},BfNg:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contact-filters"},[n("at-input",{attrs:{value:t.contactSearch,placeholder:"Search contacts...",size:"large"},nativeOn:{keyup:function(e){t.searchContacts(e)}}})],1)},c=[],o={render:a,staticRenderFns:c};e.a=o},Hjxw:function(t,e,n){"use strict";function a(t){n("0aNp")}var c=n("0GLn"),o=n("rIW4"),r=n("VU/8"),s=a,i=r(c.a,o.a,!1,s,"data-v-22346b9b",null);e.a=i.exports},IcnI:function(t,e,n){"use strict";var a=n("mUbh"),c=n("ukYY");e.a={state:{accounts:[],accountSearch:"",contactSearch:""},actions:a.a,mutations:c.a}},KF9i:function(t,e){},LcqU:function(t,e,n){"use strict";var a=n("NYxO");e.a={name:"account-filters",computed:Object(a.b)(["accountSearch"]),methods:{searchAccounts:function(t){this.$store.dispatch("search",{searchKey:"accountSearch",searchString:t.target.value})}}}},M93x:function(t,e,n){"use strict";function a(t){n("431H")}var c=n("xJD8"),o=n("PjOu"),r=n("VU/8"),s=a,i=r(c.a,o.a,!1,s,"data-v-a03cb094",null);e.a=i.exports},MBON:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"account-filters"},[n("at-input",{attrs:{value:t.accountSearch,placeholder:"Search accounts...",size:"large"},nativeOn:{keyup:function(e){t.searchAccounts(e)}}})],1)},c=[],o={render:a,staticRenderFns:c};e.a=o},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),c=n("ORbq"),o=n("NYxO"),r=n("/ocq"),s=n("yweG"),i=n.n(s),l=n("KF9i"),d=(n.n(l),n("M93x")),u=n("IcnI"),h=n("YaEn");a.default.use(c.a),a.default.use(o.a),a.default.use(r.a),a.default.use(i.a),a.default.config.productionTip=!1;var p=new o.a.Store(u.a),f=new r.a({routes:h.a});new a.default({el:"#app",store:p,router:f,template:"<App/>",components:{App:d.a}})},PjOu:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},c=[],o={render:a,staticRenderFns:c};e.a=o},Y8F9:function(t,e){},YaEn:function(t,e,n){"use strict";var a=n("uK6g"),c=n("7qMK");e.a=[{name:"home",path:"/",component:c.a},{name:"account",path:"/account/:id",component:a.a}]},YsAA:function(t,e,n){"use strict";var a=n("NYxO"),c=n("rdLu"),o=n.n(c),r=n("zgGR");e.a={name:"accounts",components:{AccountFilters:r.a},created:function(){this.$store.dispatch("fetchAccounts")},computed:Object(a.b)({filteredAccounts:function(t){return t.accountSearch?o.a.filter(t.accounts,function(e){return e.name.toLowerCase().indexOf(t.accountSearch.toLowerCase())>-1}):t.accounts}}),methods:{}}},aCya:function(t,e){},dUXA:function(t,e,n){"use strict";var a=n("rdLu"),c=n.n(a),o=n("9XKw");e.a={name:"tree-three",props:["contacts"],mounted:function(){this.buildTree()},watch:{contacts:{handler:function(t,e,n){this.buildTree()},deep:!0}},computed:{parentMap:function(){var t=this,e={};return c.a.each(this.contacts,function(n){n.parentId?e[n.parentId]=c.a.findWhere(t.contacts,{id:n.parentId}):n.reportstoid&&(e[n.reportstoid]=c.a.findWhere(t.contacts,{sfid:n.reportstoid}))}),e},root:function(){return{id:0,name:"Root",parentId:null}},contactsInTree:function(){var t=this;return c.a.filter(this.contacts,function(e){return t.parentMap[e.id||e.sfid]||e.parentId||e.reportstoid})}},methods:{hierarchyContacts:function(t){return{name:t.name,contact:t,children:this.findChildren(t)}},findChildren:function(t){var e=this,n=c.a.where(this.contactsInTree,{parentId:t.id});c.a.each(this.contactsInTree,function(e){t.sfid&&e.reportstoid===t.sfid&&null===e.parentId&&n.push(e)});var a=[];return c.a.each(n,function(t){a.push({name:t.name,contact:t,children:e.findChildren(t)})}),a},buildTree:function(){this.contacts.length&&Object(o.a)(this.hierarchyContacts(this.root),this.$el,this.updateParent)},updateParent:function(t){this.$store.dispatch("editContact",t)}}}},dYQ4:function(t,e,n){"use strict";function a(t){n("Y8F9")}var c=n("91lF"),o=n("BfNg"),r=n("VU/8"),s=a,i=r(c.a,o.a,!1,s,"data-v-17c83f2e",null);e.a=i.exports},lIye:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"account-wrapper"},[n("div",{staticClass:"row at-row"},[n("div",{staticClass:"banner"},[n("div",{staticClass:"header"},[n("router-link",{attrs:{to:"/"}},[n("at-button",{attrs:{type:"primary",icon:"icon-arrow-left",hollow:""}},[t._v("Back")])],1),t._v(" "),t.account?n("span",{staticClass:"account-name"},[t._v(t._s(t.account.name))]):t._e()],1),t._v(" "),t._m(0)])]),t._v(" "),n("div",{staticClass:"row at-row account"},[n("div",{staticClass:"col-xs-24 col-md-6 col-lg-4"},[n("ContactFilters"),t._v(" "),n("div",{staticClass:"contact-list"},t._l(t.filteredContacts,function(e){return n("div",{key:e.id,staticClass:"contact"},[n("div",{staticClass:"name"},[t._v("\n                        "+t._s(e.firstname)+" "+t._s(e.lastname)+"\n                        "),e.sfid?n("i",{staticClass:"icon icon-download"}):t._e(),t._v(" "),e.sfid?t._e():n("i",{staticClass:"icon icon-cloud-off no-cloud"}),t._v(" "),n("at-button",{staticClass:"edit-button",attrs:{icon:"icon-edit",circle:"",size:"small"},on:{click:function(n){t.editModals[e.id]=!0}}}),t._v(" "),n("at-modal",{attrs:{title:e.name,okText:"Save"},on:{"on-confirm":function(n){t.editContact(t.editModalsData[e.id],!0)}},model:{value:t.editModals[e.id],callback:function(n){t.$set(t.editModals,e.id,n)},expression:"editModals[contact.id]"}},[n("ContactModal",{attrs:{new:!1,removeContact:t.removeContact,contact:t.editModalsData[e.id],contactSearch:t.contactSearch(e.id)}})],1)],1),t._v(" "),n("div",{staticClass:"title"},[t._v("\n                        "+t._s(e.titleOverride||e.title)+"\n                    ")]),t._v(" "),n("at-select",{attrs:{filterable:"",placeholder:"Reports to...",size:"small",notFoundText:"No matching contact"},on:{"on-change":function(n){t.editContact(e)}},model:{value:e.parentId,callback:function(n){t.$set(e,"parentId",n)},expression:"contact.parentId"}},[n("at-option",{attrs:{value:null}},[t._v("Remove from tree")]),t._v(" "),n("at-option",{attrs:{value:0}},[t._v("Root")]),t._v(" "),t._l(t.contactSearch(e.id),function(e){return n("at-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})],2)],1)})),t._v(" "),n("div",{staticClass:"new-contact"},[n("at-button",{staticClass:"new-contact-button",attrs:{type:"primary",icon:"icon-user-plus",size:"large",hollow:""},on:{click:function(e){t.newContactModal=!0}}},[t._v("\n                    New Contact\n                ")]),t._v(" "),n("at-modal",{attrs:{title:"New Contact",okText:"Save"},on:{"on-confirm":t.createContact},model:{value:t.newContactModal,callback:function(e){t.newContactModal=e},expression:"newContactModal"}},[n("ContactModal",{attrs:{new:!0,removeContact:t.removeContact,contact:t.newContact,contactSearch:t.contactSearch()}})],1)],1)],1),t._v(" "),n("div",{staticClass:"col-xs-24 col-md-18 col-lg-20"},[n("TreeThree",{attrs:{contacts:t.contacts}})],1)])])},c=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"legend"},[n("div",{staticClass:"legend-item"},[n("i",{staticClass:"icon icon-download"}),t._v(" Synced From Salesforce\n                ")]),t._v(" "),n("div",{staticClass:"legend-item"},[n("i",{staticClass:"icon icon-cloud-off no-cloud"}),t._v(" Created in TreeForce\n                ")]),t._v(" "),n("div",{staticClass:"legend-item"},[n("strong",[t._v("Note:")]),t._v(" Changes made in TreeForce will not persist to Salesforce\n                ")])])}],o={render:a,staticRenderFns:c};e.a=o},mUbh:function(t,e,n){"use strict";var a=n("Xxa5"),c=n.n(a),o=n("exGp"),r=n.n(o),s=n("mvHQ"),i=n.n(s),l=n("7+uW"),d="https://trees-graph.herokuapp.com/graphql",u=function(t){return i()(t).replace(/"([^(")"]+)":/g,"$1:")};e.a={fetchAccounts:function(t){var e=this,n=t.commit;return r()(c.a.mark(function t(){var a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.default.http.post(d,{query:"\n                        query {\n                            allAccounts {\n                                nodes {\n                                    name\n                                    id\n                                    sfid\n                                    nodeId\n                                    createddate\n                                    isdeleted\n                                    systemmodstamp\n                                }\n                            }\n                        }\n                    "});case 3:a=t.sent,n("fetchAccounts",a.body.data.allAccounts.nodes),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},fetchContacts:function(t,e){var n=this;t.commit;return r()(c.a.mark(function t(){var a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.default.http.post(d,{query:'\n                        query {\n                            allContacts (condition: {accountid: "'+e+'"}) {\n                                nodes {\n                                    colorCode\n                                    createdLocally\n                                    parentId\n                                    titleOverride\n                                    uploadedImageUrl\n                                    lastname\n                                    accountid\n                                    name\n                                    mobilephone\n                                    phone\n                                    isdeleted\n                                    homephone\n                                    systemmodstamp\n                                    reportstoid\n                                    createddate\n                                    salutation\n                                    title\n                                    firstname\n                                    email\n                                    description\n                                    photourl\n                                    sfid\n                                    id\n                                    _hcLastop\n                                    _hcErr\n                                }\n                            }\n                        }\n                    '});case 3:return a=t.sent,t.abrupt("return",a.body.data.allContacts.nodes);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}},t,n,[[0,7]])}))()},search:function(t,e){(0,t.commit)("search",{searchKey:e.searchKey,searchString:e.searchString})},createContact:function(t,e){var n=this;t.commit;return r()(c.a.mark(function t(){var a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.default.http.post(d,{query:"\n                        mutation {\n                            createContact(input: {\n                                contact: "+u(e)+"\n                            }) {\n                                contact {\n                                    colorCode\n                                    createdLocally\n                                    parentId\n                                    titleOverride\n                                    uploadedImageUrl\n                                    lastname\n                                    accountid\n                                    name\n                                    mobilephone\n                                    phone\n                                    isdeleted\n                                    homephone\n                                    systemmodstamp\n                                    reportstoid\n                                    createddate\n                                    salutation\n                                    title\n                                    firstname\n                                    email\n                                    description\n                                    photourl\n                                    sfid\n                                    id\n                                    _hcLastop\n                                    _hcErr\n                                }\n                            }\n                        }\n\n                    "});case 3:return a=t.sent,t.abrupt("return",a.body.data.createContact.contact);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}},t,n,[[0,7]])}))()},editContact:function(t,e){var n=this;t.commit;return r()(c.a.mark(function t(){var a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.default.http.post(d,{query:"\n                        mutation {\n                            updateContactById(input: {\n                                id: "+e.id+",\n                                contactPatch: "+u(e)+"\n                            }) {\n                                contact {\n                                    colorCode\n                                    createdLocally\n                                    parentId\n                                    titleOverride\n                                    uploadedImageUrl\n                                    lastname\n                                    accountid\n                                    name\n                                    mobilephone\n                                    phone\n                                    isdeleted\n                                    homephone\n                                    systemmodstamp\n                                    reportstoid\n                                    createddate\n                                    salutation\n                                    title\n                                    firstname\n                                    email\n                                    description\n                                    photourl\n                                    sfid\n                                    id\n                                    _hcLastop\n                                    _hcErr\n                                }\n                            }\n                        }\n\n                    "});case 3:return a=t.sent,t.abrupt("return",a.body.data.updateContactById.contact);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}},t,n,[[0,7]])}))()},removeContact:function(t,e){var n=this;t.commit;return r()(c.a.mark(function t(){var a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.prev=1,t.next=4,l.default.http.post(d,{query:"\n                        mutation {\n                            deleteContactById(input: {\n                                id: "+e+",\n                            }) {\n                                contact {\n                                    parentId\n                                    lastname\n                                    accountid\n                                    name\n                                    title\n                                    firstname\n                                    id\n                                }\n                            }\n                        }\n\n                    "});case 4:return a=t.sent,t.abrupt("return",a.body.data.deleteContactById.contact);case 8:throw t.prev=8,t.t0=t.catch(1),t.t0;case 11:case"end":return t.stop()}},t,n,[[1,8]])}))()}}},neyN:function(t,e){},oOLh:function(t,e){},ofwx:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"tree"})},c=[],o={render:a,staticRenderFns:c};e.a=o},qDI4:function(t,e,n){"use strict";var a=n("NYxO"),c=n("rdLu"),o=n.n(c),r=n("Hjxw"),s=n("dYQ4"),i=n("8kKL"),l={firstname:"",lastname:"",name:"",titleOverride:"",email:"",phone:"",mobilephone:"",accountid:"",uploadedImageUrl:"",colorCode:"",createdLocally:!0};e.a={name:"accounts",components:{ContactModal:r.a,ContactFilters:s.a,TreeThree:i.a},data:function(){return{contacts:[],contactMap:{},salesforceContactMap:{},account:{},newContactModal:!1,newContact:o.a.extend({},l),editModals:{},editModalsData:{}}},created:function(){this.$store.dispatch("search",{searchKey:"contactSearch",searchText:""}),this.$store.state.accounts.length?this.mapAccount():this.$store.dispatch("fetchAccounts").then(this.mapAccount),this.$store.dispatch("fetchContacts",this.$route.params.id).then(this.updateContacts)},computed:Object(a.b)({accounts:"accounts",filteredContacts:function(t){return t.contactSearch?o.a.filter(this.contacts,function(e){return e.name.toLowerCase().indexOf(t.contactSearch.toLowerCase())>-1}):o.a.sortBy(this.contacts,function(t){return t.name.toLowerCase()})}}),methods:{updateContacts:function(t){var e=this;this.contacts=t,o.a.each(t,function(t){e.contactMap[t.id]=t.name,t.sfid&&(e.salesforceContactMap[t.sfid]=t.name),e.$set(e.editModals,t.id,!1),e.$set(e.editModalsData,t.id,o.a.extend({},t))})},contactSearch:function(t){return o.a.sortBy(o.a.reject(this.contacts,function(e){return e.id===t}),function(t){return t.name.toLowerCase()})},checkForRoot:function(t){return!t.parentId&&!t.reportstoid&&(o.a.findWhere(this.contacts,{parentId:t.id})||t.sfid&&o.a.findWhere(this.contacts,{reportstoid:t.sfid}))},mapAccount:function(){this.account=o.a.findWhere(this.$store.state.accounts,{sfid:this.$route.params.id})},findParent:function(t){return t.parentId?this.contactMap[t.parentId]:this.salesforceContactMap[t.reportstoid]},createContact:function(){this.newContact.firstname&&this.newContact.lastname&&this.newContact.titleOverride?(this.newContact.name=this.newContact.firstname+" "+this.newContact.lastname,this.newContact.accountid=this.account.sfid,this.$store.dispatch("createContact",this.newContact).then(this.createdContact,this.errorMessage)):this.$Message.warning("Please input a first name, last name, and title.")},createdContact:function(t){this.contacts.push(t),this.contactMap[t.id]=t.name,this.editModalsData[t.id]=o.a.extend({},t),this.newContact=o.a.extend({},l),this.$Message.success("Contact created!")},editContact:function(t,e){var n=this;e&&(t=o.a.extend(o.a.findWhere(this.contacts,{id:t.id}),t)),t.firstname&&t.lastname&&(t.titleOverride||t.title)?(t.name=t.firstname+" "+t.lastname,this.$store.dispatch("editContact",t).then(function(e){return n.editedContact(e,t)},this.errorMessage)):this.$Message.warning("Please input a first name, last name, and title.")},editedContact:function(t,e){this.contactMap[t.id]=t.name,this.editModalsData[t.id]=o.a.extend({},t),this.$Message.success("Contact edited!")},removeContact:function(t,e){this.$store.dispatch("removeContact",t).then(this.removedContact,this.errorMessage)},removedContact:function(t){this.contacts=o.a.reject(this.contacts,function(e){return e.id===t.id}),delete this.contactMap[t.id],this.$Message.warning("Contact removed!")},errorMessage:function(){this.$Message.error("Server error")}}}},rIW4:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contact-modal"},[n("div",{staticClass:"row at-row"},[n("div",{staticClass:"col-sm-24 col-md-12"},[n("at-input",{staticClass:"contact-input",attrs:{value:t.contact.firstname,placeholder:"First name"},model:{value:t.contact.firstname,callback:function(e){t.$set(t.contact,"firstname",e)},expression:"contact.firstname"}})],1),t._v(" "),n("div",{staticClass:"col-sm-24 col-md-12"},[n("at-input",{staticClass:"contact-input",attrs:{value:t.contact.lastname,placeholder:"Last name"},model:{value:t.contact.lastname,callback:function(e){t.$set(t.contact,"lastname",e)},expression:"contact.lastname"}})],1),t._v(" "),n("div",{staticClass:"col-sm-24 col-md-12"},[n("at-input",{staticClass:"contact-input",attrs:{value:t.contact.titleOverride,placeholder:t.contact.title?t.contact.title:"Title"},model:{value:t.contact.titleOverride,callback:function(e){t.$set(t.contact,"titleOverride",e)},expression:"contact.titleOverride"}})],1),t._v(" "),n("div",{staticClass:"col-sm-24 col-md-12"},[n("at-input",{staticClass:"contact-input",attrs:{value:t.contact.email,placeholder:"Email (optional)"},model:{value:t.contact.email,callback:function(e){t.$set(t.contact,"email",e)},expression:"contact.email"}})],1),t._v(" "),n("div",{staticClass:"col-sm-24 col-md-12"},[n("at-input",{staticClass:"contact-input",attrs:{value:t.contact.phone,placeholder:"Phone (optional)"},model:{value:t.contact.phone,callback:function(e){t.$set(t.contact,"phone",e)},expression:"contact.phone"}})],1),t._v(" "),n("div",{staticClass:"col-sm-24 col-md-12"},[n("at-input",{staticClass:"contact-input",attrs:{value:t.contact.uploadedImageUrl,placeholder:"Image url (optional)"},model:{value:t.contact.uploadedImageUrl,callback:function(e){t.$set(t.contact,"uploadedImageUrl",e)},expression:"contact.uploadedImageUrl"}})],1),t._v(" "),n("div",{staticClass:"col-sm-24 col-md-12"},[n("at-select",{staticClass:"contact-select",staticStyle:{width:"140px"},attrs:{value:t.contact.colorCode,size:"medium",placeholder:"Color code (optional)"},model:{value:t.contact.colorCode,callback:function(e){t.$set(t.contact,"colorCode",e)},expression:"contact.colorCode"}},[n("at-option",{attrs:{value:"",label:"No Color Code"}},[n("span",[t._v("No Color Code")])]),t._v(" "),n("at-option",{attrs:{value:"13CE66",label:"Trusted Adviser"}},[n("span",[t._v("Trusted Advisor")]),n("span",{staticClass:"color-option",staticStyle:{background:"#13CE66"}})]),t._v(" "),n("at-option",{attrs:{value:"78A4FA",label:"Developing Relations"}},[n("span",[t._v("Developing Relations")]),n("span",{staticClass:"color-option",staticStyle:{background:"#78A4FA"}})]),t._v(" "),n("at-option",{attrs:{value:"FFC82C",label:"Create Relationship"}},[n("span",[t._v("Create Relationship")]),n("span",{staticClass:"color-option",staticStyle:{background:"#FFC82C"}})]),t._v(" "),n("at-option",{attrs:{value:"FF4949",label:"Unfriendly"}},[n("span",[t._v("Unfriendly")]),n("span",{staticClass:"color-option",staticStyle:{background:"#FF4949"}})])],1)],1),t._v(" "),this.new?t._e():n("div",{staticClass:"col-sm-24 col-md-12"},[n("at-button",{staticClass:"remove-contact",attrs:{size:"medium",type:"error",hollow:""},on:{click:function(e){t.removeContact(t.contact.id)}}},[t._v("Delete Contact")])],1)])])},c=[],o={render:a,staticRenderFns:c};e.a=o},uK6g:function(t,e,n){"use strict";function a(t){n("neyN")}var c=n("qDI4"),o=n("lIye"),r=n("VU/8"),s=a,i=r(c.a,o.a,!1,s,"data-v-c5906922",null);e.a=i.exports},ukYY:function(t,e,n){"use strict";e.a={fetchAccounts:function(t,e){t.accounts=e},search:function(t,e){var n=e.searchKey,a=e.searchString;t[n]=a}}},xJD8:function(t,e,n){"use strict";e.a={name:"app"}},yUmq:function(t,e){},yoyZ:function(t,e,n){t.exports=n.p+"static/img/hierarchy.50ae765.png"},zgGR:function(t,e,n){"use strict";function a(t){n("oOLh")}var c=n("LcqU"),o=n("MBON"),r=n("VU/8"),s=a,i=r(c.a,o.a,!1,s,"data-v-1569203c",null);e.a=i.exports}},["NHnr"]);
//# sourceMappingURL=app.10580dd1565722f3850b.js.map